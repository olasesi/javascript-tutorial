<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" type="text/css" href="style.css" />
    <title>fetch</title>
  </head>

  <body>
    <div id="main" class="main">
      <div id="wheel" class="wheel">
        <div>
          <span class="span1">
            <p>😊</p>
          </span>
          <span class="span2">
            <p>😝</p>
          </span>
          <span class="span3">
            <p>😍</p>
          </span>
          <span class="span4">
            <p>😎</p>
          </span>

          <span class="span5">
            <p>🍩</p>
          </span>
          <span class="span6">
            <p>🍭</p>
          </span>
          <span class="span7">
            <p>🍰</p>
          </span>
          <span class="span8">
            <p>🍬</p>
          </span>
        </div>
      </div>

      <button class="spin" onclick="letsSpin()">SPIN</button>

      <div id="result"></div>
    </div>

    <script>
      let values;
      document.addEventListener("DOMContentLoaded", fetchData);

      async function fetchData() {
        await fetch("abia.php")
          .then((response) => {
            if (!response.ok) {
              throw new Error(`HTTP error! Status: ${response.status}`);
            }
            return response.json();
          })
          .then((data) => {
            // Handle the retrieved data
            console.log("Data from PHP:", data);

            // Display the data in the HTML
            // document.getElementById("result").innerHTML = `
            //     <p>#: ${data.id}</p>
            // <p>Value: ${data.value}</p>
            // <p>Created on: ${data.created_at}</p>
            // <p>Updated on: ${data.updated_at}</p>

            //              `;

            values = data.value;
          })
          .catch((error) => {
            console.error("Error fetching data:", error);
          });
      }
      fetchData();

      function letsSpin() {
        //var x = 1024; //min value
        //var y = 9999; //max value

        //var deg = Math.floor(Math.random() * (x - y)) + y;

        document.getElementById("wheel").style.transform =
          "rotate(" + 4 * 360 * values + "deg)";

        setTimeout(function () {
          document.getElementById(
            "result"
          ).innerHTML = `<p>Value: ${values}</p>`;
        }, 5000);
      }
    </script>
  </body>
</html>
